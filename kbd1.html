<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet"  href="kbd1.css">
</head>
<body>
    <main>
        <div class="wrapper" id="mainx">

        </div>
    </main>
    <footer>

    </footer>
    <script>
          keys={
                '0':{0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
                '1':{0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
                '2':{0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
                length:3
          }
           var  hash = {
                'q':'qq.com' ,
                'b':'baidu.com' ,
                'r':'renren.com',
                'w':'weibo.com',

            }
            var hashInLocalstorage=JSON.parse(localStorage.getItem('uuu')||'null')

            if(hashInLocalstorage)
            {
                hash=hashInLocalstorage
            }
            index=0
            while(index<keys['length'])//0 1 2
            {
                row=keys[index]
                divx = document.createElement('div')
                mainx.appendChild(divx) 
                index2=0
                while(index2<row.length)     
                {
                kbdx=document.createElement('kbd')
                imgx=document.createElement('img')
                if(hash[row[index2]]){
                    imgx.src='http://'+hash[row[index2]]+'/favicon.ico' 

                }
                else {
                    imgx.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                }
                imgx.onerror=function(qwe){
                    console.log('你下载失败了')
                    qwe.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                }
            
                imgx.src='http://'+hash[row[index2]]+'/favicon.ico'                
                spanx=document.createElement('span')
                spanx.textContent = row[index2]
                buttonx=document.createElement('button')
                buttonx.textContent= '编辑'
                buttonx.id=row[index2]
                buttonx.onclick=function(llp)
                    {
                        button=llp.target
                        key=button.id
                        img2=button.previousSibling
                        x=prompt('给我一个网址')
                        hash[key]=x //hash变更
                        localStorage.setItem('uuu',JSON.stringify(hash))
                        img2.src='http://'+x+'/favicon.ico' 
                        imgx.onerror=function(qwe)
                        {
                        console.log('你下载失败了')
                        qwe.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                        }
                    }
                kbdx.appendChild(buttonx)
                divx.appendChild(kbdx)
                kbdx.appendChild(spanx)
                kbdx.appendChild(imgx)
                kbdx.className='key'
                divx.className='row'
                index2++
                }
                index++
            }
            document.onkeypress= function(xpy)
            {
                key=xpy['key']
                website=hash[key]//q,w,e
                console.log(website)
                // location.href='http://'+website
                window.open('http://'+website,'_blank')
            }
    </script>
</body>
</html>